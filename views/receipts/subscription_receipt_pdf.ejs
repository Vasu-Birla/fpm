<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Subscription Receipt</title>
  <style>
    @page{ size:A4; margin:14mm 12mm 16mm 12mm }
    body{ font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial; color:#111; margin:0 }
    .hd{ display:flex; justify-content:space-between; align-items:center; border-bottom:2px solid #0b1831; padding-bottom:8px; margin-bottom:10px }
    .title{ font-size:24px; font-weight:800; color:#0b1831; }
    .kv{ display:grid; grid-template-columns:160px 1fr; gap:6px 10px; font-size:13px; margin:8px 0 16px }
    .kv div:nth-child(odd){ color:#6b7280 }
    table{ width:100%; border-collapse:collapse; font-size:13px; margin-top:10px }
    th,td{ border:1px solid #dfe6ee; padding:8px 6px }
    th{ background:#f5f8fc; text-transform:uppercase; font-size:11px; letter-spacing:.04em }
    .right{text-align:right}
    .tot{ font-weight:700; background:#fafbfd }
    .foot{ margin-top:14px; font-size:12px; color:#6b7280; }
  </style>
</head>
<body>

  <div class="hd">
    <div class="title">RECEIPT <%= receipt.receiptNo %></div>
    <%- include('../partials/brandbar.ejs', { org, logoSrc }) %>
  </div>

  <div class="kv">
    <div>Firm</div><div><%= receipt.firmName || '—' %></div>
    <div>Date &amp; Time of Payment</div><div><%= receipt.paidAt || '—' %></div>
    <div>Payment Method</div><div>Credit Card</div>
    <div>Authorization Code</div><div><%= receipt.authCode || '—' %></div>
  </div>

  <h3 style="margin:8px 0 6px;">Subscription</h3>
  <table>
    <thead>
      <tr>
        <th>Plan</th>
        <th>Billing Period</th>
        <th class="right">Amount (<%= receipt.currencyLabel %>)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><%= receipt.planName || ('#'+receipt.planId) %></td>
        <td><%= receipt.billingPeriod || '—' %></td>
        <td class="right"><%= receipt.amountFmt %></td>
      </tr>
    </tbody>
    <tfoot>
      <tr class="tot">
        <th colspan="2">Total Paid</th>
        <th class="right"><%= receipt.amountFmt %></th>
      </tr>
    </tfoot>
  </table>

  <div class="foot">
    Transaction ID: <strong><%= receipt.transactionId || '—' %></strong> &nbsp;|&nbsp;
    Payment Ref: <strong><%= receipt.paymentRef || '—' %></strong>
  </div>
</body>
</html>
